import{D as e,b5 as t,U as o,au as n,L as s,ap as a,ah as u,cG as d,a_ as l,b8 as c,M as m,aQ as i,bu as r,cH as v,bt as p,ay as f,ab as y,ad as b,d as h,e as M,al as x,J as E}from"./index-7477c05f.js";import{w as g}from"./tsxHelper-16c14f77.js";import{P as w}from"./vnode-abc17e97.js";const k=(s,a,u)=>{let d={offsetX:0,offsetY:0};const l=e=>{const t=e.clientX,o=e.clientY,{offsetX:a,offsetY:u}=d,l=s.value.getBoundingClientRect(),c=l.left,m=l.top,i=l.width,r=l.height,v=document.documentElement.clientWidth,p=document.documentElement.clientHeight,f=-c+a,y=-m+u,b=v-c-i+a,h=p-m-r+u,M=e=>{const l=Math.min(Math.max(a+e.clientX-t,f),b),c=Math.min(Math.max(u+e.clientY-o,y),h);d={offsetX:l,offsetY:c},s.value.style.transform=`translate(${n(l)}, ${n(c)})`},x=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",x)},c=()=>{a.value&&s.value&&a.value.removeEventListener("mousedown",l)};e((()=>{t((()=>{u.value?a.value&&s.value&&a.value.addEventListener("mousedown",l):c()}))})),o((()=>{c()}))},C=(e,t={})=>{s(e)||a("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||u("popup"),n=d((()=>o.bm("parent","hidden")));if(!l||c(document.body,n.value))return;let f=0,y=!1,b="0";const h=()=>{setTimeout((()=>{p(null==document?void 0:document.body,n.value),y&&document&&(document.body.style.width=b)}),200)};m(e,(e=>{if(!e)return void h();y=!c(document.body,n.value),y&&(b=document.body.style.width),f=g(o.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,s=i(document.body,"overflowY");f>0&&(t||"scroll"===s)&&y&&(document.body.style.width=`calc(100% - ${f}px)`),r(document.body,n.value)})),v((()=>h()))},L=e=>{if(!e)return{onClick:f,onMousedown:f,onMouseup:f};let t=!1,o=!1;return{onClick:n=>{t&&o&&e(n),t=o=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{o=e.target===e.currentTarget}}},Y=y({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:b([String,Array,Object])},zIndex:{type:b([String,Number])}});const S=h({name:"ElOverlay",props:Y,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const n=u("overlay"),{onClick:s,onMousedown:a,onMouseup:d}=L(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?M("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:a,onMouseup:d},[x(t,"default")],w.STYLE|w.CLASS|w.PROPS,["onClick","onMouseup","onMousedown"]):E("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(t,"default")])}});export{S as E,C as a,L as b,k as u};
